<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CSDL B√†i b√°o khoa h·ªçc</title>
    <link rel="stylesheet" th:href="@{/css/baibaokhoahoc.css}" />
</head>

<body>
    <div class="container">
        <!-- Sidebar -->
        <div th:insert="fragments/sidebar :: sidebar"></div>
        <!-- Main content -->
        <main class="main">
            <h1>C∆° s·ªü d·ªØ li·ªáu Khoa h·ªçc C√¥ng ngh·ªá</h1>
            <div th:insert="fragments/banner :: banner"></div>
            <div class="search-container">
                <h2><strong>T√¨m Ki·∫øm <span style="color:deeppink;">D·ªØ Li·ªáu</span></strong></h2>
                <form th:action="@{/quanlykhoahoc/baibaokhoahoc}" method="get">
                    <input type="text" 
                           name="keyword" 
                           class="search-input" 
                           placeholder="üîç Nh·∫≠p t√™n b√†i b√°o..."
                           th:value="${keyword}">
                    <select name="nkhId" class="search-select">
                        <option value="">üîΩ Ch·ªçn t√°c gi·∫£</option>
                        <option th:each="nkh : ${danhSachNhaKhoaHoc}"
                                th:value="${nkh.id}"
                                th:text="${nkh.hoTen}"
                                th:selected="${nkh.id == selectedNkhId}"></option>
                    </select>
                    <button type="submit" class="search-button">üîç T√¨m Ki·∫øm</button>
                </form>
            </div>

            <div class="article-page">
                <div class="article-header" style="display: flex; justify-content: space-between; align-items: center;">
                    <h2 style="margin: 0;">D·ªÆ LI·ªÜU B√ÄI B√ÅO KHOA H·ªåC</h2>
                    <a th:href="@{/quanlykhoahoc/baibaokhoahoc/them-baibao}" class="add-button" sec:authorize="hasAnyAuthority('Admin', 'NKH')">‚ûï Th√™m B√†i B√°o</a>
                </div>
                <div class="underline"></div>


                <div class="article-container">
				    <div th:each="baiBao : ${danhSachBaiBao}" class="article-card">
				        <a th:href="@{/quanlykhoahoc/baibaokhoahoc/chitiet/{id}(id=${baiBao.baiBaoId})}">
				        				        
				            <h3 th:text="${baiBao.tenBaiBao}">T√™n b√†i b√°o</h3>
				        </a>
				        <p><strong>Lƒ©nh v·ª±c:</strong> <span th:text="${baiBao.linhVuc}">Lƒ©nh v·ª±c</span></p>
				        <p><strong>Danh m·ª•c:</strong> <span th:text="${baiBao.noiXuatBan}">Danh m·ª•c</span></p>
				        <p><strong>NƒÉm ƒëƒÉng:</strong> <span th:text="${#dates.format(baiBao.namDang, 'yyyy')}">2024</span></p>
				        <p><strong>S√°ng t√°c:</strong> <span th:each="tacgia : ${tacGiaMap[baiBao.baiBaoId]}" th:text="${tacgia} + ', ' + ''" ></span></p>
				        <p><strong>Li√™n k·∫øt:</strong> 
				            <a th:href="${baiBao.lienKet}" th:text="${baiBao.lienKet}" target="_blank">Link</a>
				        </p>
				        <div class="bottom-row">
                            <!-- Show Delete button only for Admin -->
                            <form th:action="@{/quanlykhoahoc/baibaokhoahoc/xoa/{id}(id=${baiBao.baiBaoId})}" 
                                  method="post"
                                  onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a b√†i b√°o n√†y?')"
                                  style="display: inline;"
                                  sec:authorize="hasAuthority('Admin')">
                                <button type="submit" class="details-btn" style="border: none; background: none; cursor: pointer; color: white; background-color: #ff4444; padding: 5px 10px; border-radius: 4px;">X√≥a</button>
                            </form>
                            <!-- Show Edit button only for Admin -->
                            <a th:href="@{/quanlykhoahoc/baibaokhoahoc/sua/{id}(id=${baiBao.baiBaoId})}" 
                               class="edit-btn" 
                               sec:authorize="hasAuthority('Admin')">S·ª≠a</a>
                        </div>
				    </div>
				</div>

            </div>

        </main>


    </div>
    <!-- Footer -->
	<div th:insert="fragments/footer :: footer"></div>
</body>

</html>