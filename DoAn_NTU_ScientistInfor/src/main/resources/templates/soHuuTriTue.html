<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - CSDL KHCN</title>
    <link rel="stylesheet" th:href="@{/css/sohuutritue.css}" />
</head>

<body>
    <div class="container">
        <!-- Sidebar -->
        <div th:insert="fragments/sidebar :: sidebar"></div>

        <!-- Main content -->
        <main class="main">
            <h1>C∆° s·ªü d·ªØ li·ªáu Khoa h·ªçc C√¥ng ngh·ªá</h1>
            <div th:insert="fragments/banner :: banner"></div>
            <div class="search-container">
                <h2><strong>T√¨m Ki·∫øm <span style="color:deeppink;">D·ªØ Li·ªáu</span></strong></h2>
                <form th:action="@{/quanlykhoahoc/sohuutritue}" method="get">
                    <input type="text" class="search-input" name="keyword" placeholder="üîç Nh·∫≠p t√™n b·∫±ng ho·∫∑c t√°c gi·∫£..." th:value="${keyword}">
                    <button type="submit" class="search-button">üîç T√¨m Ki·∫øm</button>
                </form>
            </div>

            <div class="article-page">
                <div class="article-header">
                    <div>
                        <h2>D·ªÆ LI·ªÜU S·ªû H·ªÆU TR√ç TU·ªÜ</h2>
                        <div class="underline"></div>
                    </div>
                    <a th:href="@{/quanlykhoahoc/add-shtt}" class="add-btn" sec:authorize="hasAnyAuthority('Admin', 'NKH')">Th√™m S·ªü H·ªØu Tr√≠ Tu·ªá</a>
                </div>

                <div class="article-container">
                    <div th:each="shtt : ${shttList}" class="article-card">
                        <a>
                            <h3 th:text="${shtt.tenBang}"></h3>
                        </a>
                        <p><strong>NƒÉm:</strong> <span th:text="${shtt.namCap != null ? #dates.format(shtt.namCap, 'yyyy') : 'N/A'}"></span></p>
                        <p><strong>T·ªï ch·ª©c c·∫•p vƒÉn b·∫±ng:</strong> <span th:text="${shtt.toChucCap}"></span></p>
                        <p><strong>N·ªôi dung:</strong> <span th:text="${shtt.noiDung}"></span></p>
                        <p><strong>T√°c gi·∫£:</strong>
                            <span th:if="${shtt.nhanSHTT.isEmpty()}">Kh√¥ng c√≥ t√°c gi·∫£</span>
                            <span th:each="nshtt, iterStat : ${shtt.nhanSHTT}" 
                                  th:text="${nshtt.nhaKhoaHoc?.hoTen} + (${iterStat.last} ? '' : ', ')"></span>
                        </p>
                        <div class="bottom-row">
                            <form th:action="@{/quanlykhoahoc/xoa-shtt/{id}(id=${shtt.id})}" method="post" style="display:inline;">
                                <button type="submit" class="details-btn" onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a s·ªü h·ªØu tr√≠ tu·ªá n√†y?')" sec:authorize="hasAnyAuthority('Admin')">X√≥a</button>
                            </form>
                            <a th:href="@{/quanlykhoahoc/edit-shtt/{id}(id=${shtt.id})}" class="details-btn" sec:authorize="hasAnyAuthority('Admin')">S·ª≠a</a>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <div th:insert="fragments/footer :: footer"></div>
</body>
</html>