<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CSDL-ƒê·ªÅ t√†i khooa h·ªçc</title>
    <link rel="stylesheet" th:href="@{/css/deTaiList.css}"/>
</head>
<body>
    <div class="container">
        <div th:insert="fragments/sidebar :: sidebar"></div>
        <main class="main">
            <h1>C∆° s·ªü d·ªØ li·ªáu Khoa h·ªçc C√¥ng ngh·ªá</h1>
            <div th:insert="fragments/banner :: banner"></div>
            <div  class="search-wrapper">
            	<div class="search-container">
                <h2><strong>T√¨m Ki·∫øm <span style="color:deeppink;">D·ªØ Li·ªáu</span></strong></h2>
                <form th:action="@{/quanlykhoahoc/detai/search}" method="get">
                    <input type="text" name="keyword" class="search-input" placeholder="üîç Nh·∫≠p t·ª´ kh√≥a..." th:value="${keyword}"/>
                    <select name="capDeTai" class="search-select">
                        <option value="">-- Ch·ªçn c·∫•p ƒë·ªÅ t√†i --</option>
                        <option th:each="cap : ${capDeTaiValues}" 
                                th:value="${cap.name()}" 
                                th:text="${cap}" 
                                th:selected="${capDeTai == cap}"></option>
                    </select>
                    <button type="submit" class="search-button">üîç T√¨m Ki·∫øm</button>
                </form>
            </div>
            </div>
            
            <div class="content">
                <div class="result-header">
                    <div class="result-title">
                        <h2>D·ªÆ LI·ªÜU ƒê·ªÄ T√ÄI KHOA H·ªåC</h2>
                        <div class="underline"></div>
                    </div>
                    <div class="result-info">
                        <span th:text="${deTaiKHList != null} ? ${deTaiKHList.size()} + ' K·∫æT QU·∫¢' : '0 K·∫æT QU·∫¢'">0 K·∫æT QU·∫¢</span>
                        <a th:href="@{/quanlykhoahoc/detai/add}" class="export-btn btn btn-primary" sec:authorize="hasAnyAuthority('Admin', 'NKH')">T·∫†O M·ªöI ƒê·ªÄ T√ÄI KHOA H·ªåC</a>
                    </div>
                </div>
                <div class="project-list">
                    <div class="project-card" th:each="project : ${deTaiKHList}">
                        <h3 th:text="${project.tenDeTai} ?: 'Kh√¥ng c√≥ t√™n ƒë·ªÅ t√†i'">T√™n ƒë·ªÅ t√†i</h3>
                        <p><strong>ƒê∆°n v·ªã ch·ªß tr√¨:</strong> <span th:text="${project.donViChuTri} ?: 'Kh√¥ng c√≥ ƒë∆°n v·ªã'">ƒê∆°n v·ªã</span></p>
                        <p><strong>T√¨nh tr·∫°ng:</strong> <span th:text="${project.tinhTrang} ?: 'Kh√¥ng c√≥ t√¨nh tr·∫°ng'">T√¨nh tr·∫°ng</span></p>
                        <p><strong>Ng∆∞·ªùi tham gia:</strong>
                            <span th:if="${project.nhaKhoaHocs.isEmpty()}">Ch∆∞a c√≥ ng∆∞·ªùi tham gia</span>
                            <span th:each="nkh, stat : ${project.nhaKhoaHocs}">
                                <span th:text="${nkh.hoTen}">T√™n nh√† khoa h·ªçc</span><span th:if="${!stat.last}">,</span>
                            </span>
                        </p>
                        <div>
                            <a th:href="@{/quanlykhoahoc/detai/view/{id}(id=${project.deTaiId})}" class="button">Xem</a>
                            <a th:href="@{/quanlykhoahoc/detai/edit/{id}(id=${project.deTaiId})}" class="button" sec:authorize="hasAuthority('Admin')">Ch·ªânh s·ª≠a</a>
                            <a th:href="@{/quanlykhoahoc/detai/delete/{id}(id=${project.deTaiId})}" class="button" onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a ƒë·ªÅ t√†i n√†y?')" sec:authorize="hasAuthority('Admin')">X√≥a</a>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <div th:insert="fragments/footer :: footer"></div>
</body>
</html>